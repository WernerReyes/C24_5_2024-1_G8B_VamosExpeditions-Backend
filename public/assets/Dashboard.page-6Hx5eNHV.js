import{C as oe,r as i,d as ce,e as de,f as ue,g as Ie,h as _e,i as Te,O as F,D as P,k as Le,U as Me,m as me,Z as K,n as Be,o as Z,p as M,E as De,q as Fe,T as ze,s as Ve,t as He,R as Qe,_ as Ue,v as Ye,j as e,w as O,x as $e,S,y as I,z as R,B as J,u as Ge,A as Ke,F as pe,G as W,c as We,H as Ze,J as Je,K as Xe,L as qe,M as et,N as tt}from"./index-Id9fuaH4.js";import{E as Q,D as U}from"./ErrorBoundary-CwUcEuE4.js";import{f as X}from"./format-D-vkVYqJ.js";import{T as at}from"./tag.esm-DY91iNY3.js";function H(){return H=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},H.apply(this,arguments)}function B(t){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},B(t)}function st(t,a){if(B(t)!=="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,a||"default");if(B(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function rt(t){var a=st(t,"string");return B(a)==="symbol"?a:String(a)}function nt(t,a,s){return a=rt(a),a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function lt(t){if(Array.isArray(t))return t}function it(t,a){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,r,c,o,l=[],x=!0,y=!1;try{if(c=(s=s.call(t)).next,a!==0)for(;!(x=(n=c.call(s)).done)&&(l.push(n.value),l.length!==a);x=!0);}catch(g){y=!0,r=g}finally{try{if(!x&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(y)throw r}}return l}}function se(t,a){(a==null||a>t.length)&&(a=t.length);for(var s=0,n=new Array(a);s<a;s++)n[s]=t[s];return n}function ot(t,a){if(t){if(typeof t=="string")return se(t,a);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return se(t,a)}}function ct(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function re(t,a){return lt(t)||it(t,a)||ot(t,a)||ct()}var dt={root:function(a){a.props;var s=a.context;return Z("p-overlaypanel p-component",{"p-input-filled":s&&s.inputStyle==="filled"||M.inputStyle==="filled","p-ripple-disabled":s&&s.ripple===!1||M.ripple===!1})},closeIcon:"p-overlaypanel-close-icon",closeButton:"p-overlaypanel-close p-link",content:"p-overlaypanel-content",transition:"p-overlaypanel"},ut=`
@layer primereact {
    .p-overlaypanel {
        position: absolute;
        margin-top: 10px;
        /* Github #3122: Prevent animation flickering  */
        top: -9999px;
        left: -9999px;
    }
    
    .p-overlaypanel-flipped {
        margin-top: -10px;
        margin-bottom: 10px;
    }
    
    .p-overlaypanel-close {
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        position: relative;
    }
    
    /* Animation */
    .p-overlaypanel-enter {
        opacity: 0;
        transform: scaleY(0.8);
    }
    
    .p-overlaypanel-enter-active {
        opacity: 1;
        transform: scaleY(1);
        transition: transform .12s cubic-bezier(0, 0, 0.2, 1), opacity .12s cubic-bezier(0, 0, 0.2, 1);
    }
    
    .p-overlaypanel-enter-done {
        transform: none;
    }
    
    .p-overlaypanel-exit {
        opacity: 1;
    }
    
    .p-overlaypanel-exit-active {
        opacity: 0;
        transition: opacity .1s linear;
    }
    
    .p-overlaypanel:after, .p-overlaypanel:before {
        bottom: 100%;
        left: calc(var(--overlayArrowLeft, 0) + 1.25rem);
        content: " ";
        height: 0;
        width: 0;
        position: absolute;
        pointer-events: none;
    }
    
    .p-overlaypanel:after {
        border-width: 8px;
        margin-left: -8px;
    }
    
    .p-overlaypanel:before {
        border-width: 10px;
        margin-left: -10px;
    }
    
    .p-overlaypanel-flipped:after, .p-overlaypanel-flipped:before {
        bottom: auto;
        top: 100%;
    }
    
    .p-overlaypanel.p-overlaypanel-flipped:after {
        border-bottom-color: transparent;
    }
    
    .p-overlaypanel.p-overlaypanel-flipped:before {
        border-bottom-color: transparent
    }
}
`,L=oe.extend({defaultProps:{__TYPE:"OverlayPanel",id:null,dismissable:!0,showCloseIcon:!1,closeIcon:null,style:null,className:null,appendTo:null,breakpoints:null,ariaCloseLabel:null,transitionOptions:null,onShow:null,onHide:null,children:void 0,closeOnEscape:!0},css:{classes:dt,styles:ut}});function ne(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),s.push.apply(s,n)}return s}function mt(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?ne(Object(s),!0).forEach(function(n){nt(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ne(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var q=i.forwardRef(function(t,a){var s=ce(),n=i.useContext(de),r=L.getProps(t,n),c=i.useState(!1),o=re(c,2),l=o[0],x=o[1],y=L.setMetaData({props:r,state:{visible:l}}),g=y.ptm,p=y.cx;y.sx;var m=y.isUnstyled;ue(L.css.styles,m,{name:"overlaypanel"});var b=i.useRef(""),d=i.useRef(null),j=i.useRef(null),w=i.useRef(!1),C=i.useRef(null),v=i.useRef(null),E=Ie({target:j,overlay:d,listener:function(u,f){var N=f.type,T=f.valid;if(T)switch(N){case"outside":r.dismissable&&!w.current&&_();break;case"resize":case"scroll":case"orientationchange":D();break}w.current=!1},when:l}),k=re(E,2),A=k[0],ge=k[1],ee=l&&r.closeOnEscape,te=_e("overlay-panel",ee);Te({callback:function(){_()},when:ee&&te,priority:[De.OVERLAY_PANEL,te]});var ye=function(u){return d&&d.current&&!(d.current.isSameNode(u)||d.current.contains(u))},ve=function(u,f){return j.current!=null&&j.current!==(f||u.currentTarget||u.target)},je=function(u){_(),u.preventDefault()},be=function(u){w.current=!0,F.emit("overlay-click",{originalEvent:u,target:j.current})},ae=function(){w.current=!0},Ne=function(u,f){l?(_(),ve(u,f)&&(j.current=f||u.currentTarget||u.target,setTimeout(function(){Y(u,j.current)},200))):Y(u,f)},Y=function(u,f){j.current=f||u.currentTarget||u.target,l?D():(x(!0),v.current=function(N){!ye(N.target)&&(w.current=!0)},F.on("overlay-click",v.current))},_=function(){x(!1),F.off("overlay-click",v.current),v.current=null},we=function(){d.current.setAttribute(b.current,""),K.set("overlay",d.current,n&&n.autoZIndex||M.autoZIndex,n&&n.zIndex.overlay||M.zIndex.overlay),P.addStyles(d.current,{position:"absolute",top:"0",left:"0"}),D()},Ce=function(){A(),r.onShow&&r.onShow()},Ee=function(){ge()},Oe=function(){K.clear(d.current),r.onHide&&r.onHide()},D=function(){if(j.current&&d.current){P.absolutePosition(d.current,j.current);var u=P.getOffset(d.current),f=P.getOffset(j.current),N=0;u.left<f.left&&(N=f.left-u.left),d.current.style.setProperty("--overlayArrowLeft","".concat(N,"px")),u.top<f.top?(d.current.setAttribute("data-p-overlaypanel-flipped","true"),m&&P.addClass(d.current,"p-overlaypanel-flipped")):(d.current.setAttribute("data-p-overlaypanel-flipped","false"),m&&P.removeClass(d.current,"p-overlaypanel-flipped"))}},Pe=function(){if(!C.current){C.current=P.createInlineStyle(n&&n.nonce||M.nonce,n&&n.styleContainer);var u="";for(var f in r.breakpoints)u=u+`
                    @media screen and (max-width: `.concat(f,`) {
                        .p-overlaypanel[`).concat(b.current,`] {
                            width: `).concat(r.breakpoints[f],`;
                        }
                    }
                `);C.current.innerHTML=u}};Le(function(){b.current=Me(),r.breakpoints&&Pe()}),me(function(){C.current=P.removeInlineStyle(C.current),v.current&&(F.off("overlay-click",v.current),v.current=null),K.clear(d.current)}),i.useImperativeHandle(a,function(){return{props:r,toggle:Ne,show:Y,hide:_,align:D,isVisible:function(){return l},getElement:function(){return d.current}}});var Se=function(){var u=s({className:p("closeIcon"),"aria-hidden":!0},g("closeIcon")),f=r.closeIcon||i.createElement(ze,u),N=Ve.getJSXIcon(f,mt({},u),{props:r}),T=r.ariaCloseLabel||He("close"),$=s({type:"button",className:p("closeButton"),onClick:function(Ae){return je(Ae)},"aria-label":T},g("closeButton"));return r.showCloseIcon?i.createElement("button",$,N,i.createElement(Qe,null)):null},Re=function(){var u=Se(),f=s({id:r.id,className:Z(r.className,p("root",{context:n})),style:r.style,onClick:function(G){return be(G)}},L.getOtherProps(r),g("root")),N=s({className:p("content"),onClick:function(G){return ae()},onMouseDown:ae},L.getOtherProps(r),g("content")),T=s({classNames:p("transition"),in:l,timeout:{enter:120,exit:100},options:r.transitionOptions,unmountOnExit:!0,onEnter:we,onEntered:Ce,onExit:Ee,onExited:Oe},g("transition"));return i.createElement(Fe,H({nodeRef:d},T),i.createElement("div",H({ref:d},f),i.createElement("div",N,r.children),u))},ke=Re();return i.createElement(Be,{element:ke,appendTo:r.appendTo})});q.displayName="OverlayPanel";var z=oe.extend({defaultProps:{__TYPE:"Chart",id:null,type:null,data:null,options:null,plugins:null,width:null,height:null,style:null,className:null,children:void 0},css:{classes:{root:"p-chart"},inlineStyles:{root:function(a){var s=a.props;return Object.assign({width:s.width,height:s.height},s.style)}},styles:`
        @layer primereact {
            .p-chart {
                position: relative
            }
        }
        `}}),le=function(){try{return Chart}catch{return null}}(),xe=i.memo(i.forwardRef(function(t,a){var s=ce(),n=i.useContext(de),r=z.getProps(t,n),c=z.setMetaData({props:r}),o=c.ptm,l=c.cx,x=c.sx,y=c.isUnstyled;ue(z.css.styles,y,{name:"chart"});var g=i.useRef(null),p=i.useRef(null),m=i.useRef(null),b=function(){d();var k={type:r.type,data:r.data,options:r.options,plugins:r.plugins};le?p.current=new le(m.current,k):Ue(()=>import("./auto-D-lioEmw.js"),[]).then(function(A){d(),m.current&&A&&(A.default?p.current=new A.default(m.current,k):p.current=new A(m.current,k))})},d=function(){p.current&&(p.current.destroy(),p.current=null)};i.useImperativeHandle(a,function(){return{props:r,getCanvas:function(){return m.current},getChart:function(){return p.current},getBase64Image:function(){return p.current.toBase64Image()},getElement:function(){return g.current},generateLegend:function(){return p.current&&p.current.generateLegend()},refresh:function(){return p.current&&p.current.update()}}}),i.useEffect(function(){b()}),me(function(){d()});var j=r.options&&r.options.plugins&&r.options.plugins.title&&r.options.plugins.title.text,w=r.ariaLabel||j,C=s({id:r.id,ref:g,style:x("root"),className:Z(r.className,l("root"))},z.getOtherProps(r),o("root")),v=s({ref:m,width:r.width,height:r.height,role:"img","aria-label":w},o("canvas"));return i.createElement("div",C,i.createElement("canvas",v))}),function(t,a){return t.data===a.data&&t.options===a.options&&t.type===a.type});xe.displayName="Chart";const pt=()=>{const t=i.useRef(null),[a,s]=i.useState(new Date().getFullYear()),{currentData:n,isLoading:r,isError:c,refetch:o,isFetching:l}=Ye({year:a}),[x,y]=i.useState({}),[g,p]=i.useState({});return i.useEffect(()=>{if(!n)return;const m=getComputedStyle(document.documentElement),b=m.getPropertyValue("--text-color"),d=m.getPropertyValue("--text-color"),j=m.getPropertyValue("--surface-border"),w={labels:n==null?void 0:n.data.map(v=>v.month),datasets:[{type:"bar",label:"Ingresos",backgroundColor:m.getPropertyValue("--tertiary-color"),data:n==null?void 0:n.data.map(v=>v.income),borderColor:"white",borderWidth:2},{type:"bar",label:"Margen",backgroundColor:m.getPropertyValue("--primary-color"),data:n==null?void 0:n.data.map(v=>v.margin),options:{indexAxis:"y"}},{type:"bar",label:"Viajes",backgroundColor:m.getPropertyValue("black"),data:n==null?void 0:n.data.map(v=>v.trips),options:{indexAxis:"y"}}]},C={maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{position:"bottom",labels:{color:b}}},scales:{x:{ticks:{color:d},grid:{color:j}},y:{ticks:{color:d},grid:{color:j}}}};y(w),p(C)},[n]),e.jsxs(Q,{loadingComponent:e.jsx(ft,{}),isLoader:l||r,fallBackComponent:e.jsx("div",{className:"flex items-center justify-center h-72",children:e.jsx(U,{refetch:o,isFetching:l,isLoading:r,message:"No se pudieron cargar las estadisticas"})}),error:c,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm md:text-lg font-semibold text-tertiary max-w-28",children:"Resumen de estadistica"}),e.jsxs("div",{className:"flex items-center gap-x-1 cursor-pointer",onClick:m=>{var b;return(b=t==null?void 0:t.current)==null?void 0:b.toggle(m)},children:[e.jsx("span",{className:"text-slate-500",children:a}),e.jsx("i",{className:"pi pi-chevron-down text-slate-500"})]}),e.jsx(q,{className:"!z-10",ref:t,children:e.jsx(e.Fragment,{children:xt().map(m=>e.jsx("div",{onClick:()=>s(m),className:O("cursor-pointer p-2 hover:bg-gray-100 rounded-sm",m===a&&"bg-gray-100"),children:m},m))})})]}),e.jsx("div",{className:"flex items-center mt-4 w-full",children:e.jsx(xe,{className:"w-full max-w-screen-lg mx-auto h-48 md:h-72 lg:h-96 max-h-96",type:"line",data:x,options:g})})]})},xt=()=>{const t=new Date().getFullYear();return Array.from({length:5},(a,s)=>t-s)};function ft(){const{width:t,DESKTOP:a}=$e();return e.jsx("div",{className:"w-full max-w-6xl  mx-auto p-6 shadow-sm",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(S,{width:"16rem",height:"2rem",className:"mb-4"}),e.jsx("div",{className:"block md:hidden",children:e.jsx(S,{width:"100%",height:"8rem",className:"mb-4"})}),e.jsxs("div",{className:"md:h-72 lg:h-[340px] w-full relative pt-4 hidden md:block",children:[e.jsx("div",{className:"absolute left-0 top-4 bottom-10 flex flex-col justify-between",children:[12e3,1e4,8e3,6e3,4e3,2e3,0].map((s,n)=>e.jsx("div",{className:"flex items-center h-6",children:e.jsx("span",{className:"text-gray-300 text-sm w-12 text-right",children:s})},`y-${n}`))}),e.jsx("div",{className:"absolute left-16 right-0 top-4 bottom-10 flex flex-col justify-between pointer-events-none",children:[...Array(7)].map((s,n)=>e.jsx("div",{className:"border-t border-gray-100 w-full"},`grid-${n}`))}),e.jsx("div",{className:"absolute left-16 right-0 top-4 bottom-10",children:e.jsx("div",{className:"h-full flex items-end justify-between px-4",children:[...Array(12)].map((s,n)=>e.jsx("div",{className:"flex flex-col items-center justify-end h-full",children:e.jsx(S,{width:t>a?"2rem":"1.5rem",height:`${ht()}%`,className:"rounded-t"})},`bar-${n}`))})})]})]})})}const ht=()=>Math.floor(Math.random()*100),ie={CURRENT_MONTH:{label:"Mes actual",value:"totalCurrentMonth"},LAST_MONTH:{label:"Mes anterior",value:"totalPreviousMonth"},TOTAL:{label:"Total",value:"total"}},V=({title:t,icon:a,extraInfo:s,type:n="quantity"})=>{const r=i.useRef(null),[c,o]=i.useState(ie.CURRENT_MONTH);return s?e.jsxs(I,{className:O("w-full shadow-md rounded-md  col-span-4 md:col-span-2 lg:col-span-1  max-w-screen-lg"),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"text-sm md:text-lg font-semibold text-tertiary sm:max-w-48 lg:max-w-fit",children:t}),e.jsx("i",{className:O(a,"text-xl text-primary")})]}),e.jsxs("span",{className:"text-4xl md:text-2xl xl:text-3xl 2xl:text-4xl font-extrabold text-tertiary block",children:[n==="currency"&&X(s[c.value]),n==="quantity"&&s[c.value],n==="percentage"&&s[c.value]+"%"]}),e.jsxs("div",{className:"flex items-center gap-x-2 justify-between",children:[e.jsx("span",{className:"text-sm text-slate-500",children:c.value==="totalCurrentMonth"?`${s.increase>0?"+":""}${s.increase}% desde el mes anterior`:""}),e.jsxs("div",{className:"flex items-center gap-x-1 cursor-pointer",onClick:l=>{var x;return(x=r==null?void 0:r.current)==null?void 0:x.toggle(l)},children:[e.jsx("span",{className:"text-slate-500 text-sm",children:c.label}),e.jsx("i",{className:"pi pi-chevron-down text-slate-500"})]}),e.jsx(q,{className:"!z-10",ref:r,children:Object.values(ie).map(l=>e.jsx("div",{onClick:()=>o(l),className:O("cursor-pointer p-2 hover:bg-gray-100 rounded-sm",c.value===l.value&&"bg-gray-100"),children:l.label},l.value))})]})]}):null},fe=()=>e.jsx(I,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(S,{shape:"circle",size:"3rem"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(S,{width:"60%",height:"1rem"}),e.jsx(S,{width:"40%",height:"0.75rem"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx(S,{width:"4rem",height:"1rem"}),e.jsx(S,{width:"5rem",height:"1.2rem",className:"mt-2"})]})]})}),he=({createdAt:t,updatedAt:a,userFullname:s,handleViewDetails:n})=>e.jsxs("div",{className:"bg-gray-50 p-3 mt-4 border-gray-100 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-y-3 md:grid-cols-3",children:[e.jsxs("div",{className:"text-xs flex max-sm:justify-center items-center",children:[e.jsx("i",{className:"pi pi-calendar h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 ",children:"Fecha de creación"}),e.jsx("p",{className:"text-gray-700",children:R.format(t,"dd/MM/yyyy HH:mm")})]})]}),e.jsxs("div",{className:"text-xs flex items-center justify-center",children:[e.jsx("i",{className:"pi pi-clock h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Última actualización"}),e.jsx("p",{className:"text-gray-700",children:R.format(a,"dd/MM/yyyy HH:mm")})]})]}),e.jsxs("div",{className:"text-xs flex items-center max-sm:justify-center justify-end",children:[e.jsx("i",{className:"pi pi-user h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Creado por"}),e.jsx("p",{className:"text-gray-700",children:s||"Usuario desconocido"})]})]})]}),e.jsx("div",{className:"w-full flex md:justify-end",children:e.jsx(J,{size:"small",label:"Ver detalles",className:"mt-4 w-full md:max-w-48 text-sm",onClick:()=>n()})})]}),{VIEW_QUOTE:gt}=We.private,yt=({quotation:t})=>{var c,o,l,x,y,g,p;const a=Ge(),[s,n]=i.useState(!1),r=m=>{a(gt(m))};return e.jsxs(I,{title:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"inline-flex items-center space-x-2",children:[e.jsx("i",{className:"pi pi-file text-gray-400"}),e.jsxs("p",{className:"text-sm sm:text-base font-medium text-gray-500",children:["Cotización: ",t.name]})]}),e.jsx(Ke,{value:t.completionPercentage,className:"w-full sm:w-24 h-3 text-[10px]"})]}),className:"hover:bg-gray-100 transition duration-200 group",pt:{body:{className:"py-2 sm:py-0"}},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(pe,{size:"large",shape:"circle",className:"max-sm:text-lg",label:((o=(c=t.tripDetails)==null?void 0:c.client)==null?void 0:o.fullName)||"?"}),e.jsx("div",{className:"ml-3",children:t.tripDetails?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm sm:text-base font-medium text-gray-900",children:(x=(l=t.tripDetails)==null?void 0:l.client)==null?void 0:x.fullName}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs sm:text-sm text-gray-500",children:[e.jsx("i",{className:"pi pi-calendar"}),e.jsxs("p",{children:[R.format((y=t.tripDetails)==null?void 0:y.startDate)," -"," ",R.format((g=t.tripDetails)==null?void 0:g.endDate)]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm sm:text-base font-medium text-gray-400",children:"Cliente no asignado"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-300",children:"--/--/---- - --/--/----"})]})})]}),e.jsxs("div",{className:"flex flex-col items-end sm:ml-auto sm:me-2 space-y-2",children:[e.jsx("p",{className:"text-lg sm:text-xl font-semibold text-primary",children:X(t.finalPrice||0)}),e.jsx(at,{...vt(t.status)})]}),e.jsx(J,{text:!0,icon:s?"pi pi-chevron-up":"pi pi-chevron-down",className:"text-gray-400 h-8 w-8 p-0 self-center sm:self-auto",onClick:()=>n(!s)})]}),s&&e.jsx(he,{createdAt:t.createdAt,updatedAt:t.updatedAt,userFullname:((p=t.user)==null?void 0:p.fullname)||"Usuario desconocido",handleViewDetails:()=>r(t.id)})]})},vt=t=>({value:W[t].label,severity:W[t].severity,icon:W[t].icon}),jt=()=>{const[t,a]=i.useState(!1),[s,n]=i.useState(!1);return i.useEffect(()=>{if(t){const r=setTimeout(()=>{n(!0)},500);return()=>{clearTimeout(r),n(!1)}}},[t]),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-8 text-center transition-all duration-300 relative",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:O("bg-gray-50 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6 transition-all duration-500",t&&"bg-teal-50"),children:e.jsx("i",{className:O("pi text-4xl transition-all pi-file duration-500",t?"text-primary":"text-gray-300")})}),t&&e.jsx("div",{className:"absolute top-2 right-1/2 translate-x-16",children:e.jsx("div",{className:"animate-pulse",children:e.jsx("i",{className:"pi pi-chart-line text-teal-500 text-xl"})})})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No hay cotizaciones recientes"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Las cotizaciones que crees aparecerán aquí para que puedas revisarlas y convertirlas en reservas."}),s&&e.jsx("div",{className:"absolute top-6 right-6 bg-teal-50 text-teal-700 p-3 rounded-lg shadow-sm border border-teal-100 text-sm max-w-xs animate-fade-in",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"bg-teal-100 rounded-full p-1.5 mt-0.5",children:e.jsx("i",{className:"pi pi-chart-line text-teal-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Consejo:"}),e.jsx("p",{children:"Crear cotizaciones te ayuda a gestionar mejor tus ventas potenciales."})]})]})})]})})},bt=()=>{const{currentData:t,isLoading:a,isFetching:s,refetch:n,isError:r}=Ze({page:1,limit:5}),c=t==null?void 0:t.data.content;return e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-sm md:text-lg font-bold text-tertiary mb-4",children:"Cotizaciones Recientes"}),e.jsx(Q,{isLoader:a||s,loadingComponent:e.jsx("div",{className:"space-y-4",children:[...Array(6)].map((o,l)=>e.jsx(fe,{},l))}),fallBackComponent:e.jsx(U,{refetch:n,isFetching:s,isLoading:a,message:"No se pudieron cargar las cotizaciones recientes"}),error:r,children:e.jsx("ul",{className:"space-y-3",children:c&&c.length?c.map((o,l)=>e.jsx(yt,{quotation:o},l)):e.jsx(jt,{})})})]})},Nt=()=>{const[t,a]=i.useState(!1);return e.jsx(I,{className:"text-center transition-all duration-300",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:O("bg-gray-50 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6 transition-all duration-500",t&&"bg-teal-50"),children:e.jsx("i",{className:O("pi text-4xl transition-all pi-calendar duration-500",t?"text-primary":"text-gray-300")})}),t&&e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full",children:e.jsx("div",{className:"animate-bounce flex justify-center mt-[-20px]",children:e.jsx("i",{className:"pi pi-plus-circle text-teal-500 text-xl"})})})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No tienes reservas activas"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Cuando crees una reserva, aparecerá aquí para que puedas gestionarla fácilmente."})]})})},wt=({reservation:t})=>{var o,l,x,y,g,p,m,b;const[a,s]=i.useState(!1),n=((x=(l=(o=t.versionQuotation)==null?void 0:o.tripDetails)==null?void 0:l.client)==null?void 0:x.fullName)||"",r=(y=t.versionQuotation)==null?void 0:y.tripDetails,c=d=>{alert(`Viewing details for quote ID: ${d}`)};return e.jsxs(I,{title:e.jsxs("div",{className:"flex items-center gap-x-1 text-gray-500 mb-3",children:[e.jsx("i",{className:"pi pi-file text-gray-400"}),e.jsxs("span",{className:"text-sm",children:["Reserva: ",t.id]})]}),className:"hover:bg-gray-100 transition duration-200 group",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center w-full sm:w-auto",children:[e.jsx(pe,{size:"large",shape:"circle",className:"max-sm:text-lg",label:n}),e.jsxs("div",{className:"ml-3 text-sm",children:[e.jsx("h3",{className:"text-gray-500 font-medium",children:n}),e.jsxs("div",{className:"flex gap-x-1 items-center text-gray-400",children:[e.jsx("i",{className:"pi pi-calendar text-gray-500"}),e.jsxs("span",{children:[R.format(r.startDate)," -"," ",R.format(r.endDate)]})]})]})]}),e.jsxs("div",{className:"flex items-center w-full sm:w-auto justify-between sm:justify-end",children:[e.jsx("div",{className:"text-right mr-4",children:e.jsx("div",{className:"text-primary text-lg font-semibold",children:X(((g=t.versionQuotation)==null?void 0:g.finalPrice)||0)})}),e.jsx(J,{text:!0,icon:a?"pi pi-chevron-up":"pi pi-chevron-down",className:"text-gray-400 h-8 w-8 p-0",onClick:()=>s(!a)})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-x-1 text-gray-500",children:[e.jsx("i",{className:"pi pi-map-marker text-gray-400"}),e.jsx("span",{children:(p=r==null?void 0:r.cities)==null?void 0:p.map(d=>d.name).join(" - ")})]}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx("i",{className:O("text-gray-400 me-1.5 text-sm pi ",(r==null?void 0:r.numberOfPeople)===1?"pi-user":"pi-users")}),e.jsx("span",{children:(r==null?void 0:r.numberOfPeople)===1?"1 persona":`${r==null?void 0:r.numberOfPeople} personas`})]})]}),a&&e.jsx(he,{createdAt:t.createdAt,updatedAt:t.updatedAt,userFullname:((b=(m=t.versionQuotation)==null?void 0:m.user)==null?void 0:b.fullname)||"Usuario desconocido",handleViewDetails:()=>c(t.id)})]},t.id)},Ct=()=>{var o;const{currentData:t,isError:a,isLoading:s,refetch:n,isFetching:r}=Je({limit:6,page:1,status:[Xe.ACTIVE]}),c=(o=t==null?void 0:t.data)==null?void 0:o.content;return e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-sm md:text-lg font-bold text-tertiary mb-4",children:"Reservas activas"}),e.jsx(Q,{error:a,isLoader:s||r,loadingComponent:Array.from({length:6}).map((l,x)=>e.jsx(fe,{},x)),fallBackComponent:e.jsx(U,{isFetching:r,isLoading:s,message:"No se pudieron cargar las reservas activas",refetch:n}),children:e.jsx("ul",{className:"space-y-3",children:c&&c.length?c.map(l=>e.jsx(wt,{reservation:l},l.id)):e.jsx(Nt,{})})})]})},Et=["No se pudieron cargar la cantidad de cotizaciones pendientes","No se pudieron cargar las reservas activas","No se pudieron cargar los ingresos totales","No se pudó cargar el margen de utilidad"],At=()=>{const{authUser:t}=qe(l=>l.auth),{currentData:a,isLoading:s,isFetching:n,refetch:r,isError:c}=et(),o=a==null?void 0:a.data;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between max-sm:gap-x-3 items-center",children:[e.jsxs("h1",{className:"text-xl sm:text-3xl text-start font-bold text-primary",children:[Ot(),", ",t==null?void 0:t.fullname," 👋"]}),e.jsx(tt,{})]}),e.jsxs("div",{className:"grid grid-cols-4 grid-flow-row gap-x-4 gap-y-6 mt-4",children:[e.jsx("div",{className:"w-full bg-white border col-span-4 h-full shadow-md rounded-md p-3",children:e.jsx(pt,{})}),e.jsxs(Q,{isLoader:n||s,fallBackComponent:e.jsx(e.Fragment,{children:Et.map((l,x)=>e.jsx(I,{className:"shadow-md flex items-center justify-center col-span-4 md:col-span-2 lg:col-span-1",children:e.jsx(U,{refetch:r,isFetching:n,isLoading:s,message:l})},x))}),skeletonQuantity:4,skeleton:{className:"col-span-4 md:col-span-2 lg:col-span-1",height:"10rem"},error:c,children:[e.jsx(V,{title:"Cotizaciones Pendientes",icon:"pi pi-file",extraInfo:o==null?void 0:o.totalPendingQuotations}),e.jsx(V,{title:"Reservas Activas",icon:"pi pi-calendar",extraInfo:o==null?void 0:o.totalActive}),e.jsx(V,{title:"Ingresos Totales",icon:"pi pi-dollar",extraInfo:o==null?void 0:o.totalIncome,type:"currency"}),e.jsx(V,{title:"Margen de Utilidad",icon:"pi pi-percentage",extraInfo:o==null?void 0:o.totalMargin,type:"percentage"})]}),e.jsx("div",{className:"w-full p-6 bg-white border col-span-4 self-start lg:col-span-2 shadow-md rounded-md",children:e.jsx(bt,{})}),e.jsx("div",{className:"w-full p-6 bg-white border col-span-4 self-start lg:col-span-2 shadow-md rounded-md   ",children:e.jsx(Ct,{})})]})]})},Ot=()=>{const t=R.getHours();return t>=0&&t<12?"Buenos días":t>=12&&t<18?"Buenas tardes":"Buenas noches"};export{At as default};
