import{C as ce,r as i,d as de,e as ue,f as me,g as Ie,h as Te,i as _e,O as V,D as k,k as Le,U as De,m as pe,Z as W,n as Be,o as J,p as B,E as Me,q as ze,T as Ve,s as Fe,t as He,R as Qe,_ as Ue,v as $e,j as e,w as S,x as Ge,S as A,y as T,z as I,B as X,u as Ye,A as Ke,F as xe,G as Z,c as We,H as Ze,J as Je,K as Xe,L as qe,M as et,N as tt}from"./index-BdYBcVOR.js";import{E as U,D as $}from"./ErrorBoundary-CgHbYiFm.js";import{f as q}from"./format-D-vkVYqJ.js";import{T as at}from"./tag.esm-ChLa9ATJ.js";function Q(){return Q=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Q.apply(this,arguments)}function M(t){"@babel/helpers - typeof";return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},M(t)}function st(t,a){if(M(t)!=="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,a||"default");if(M(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function rt(t){var a=st(t,"string");return M(a)==="symbol"?a:String(a)}function nt(t,a,s){return a=rt(a),a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function lt(t){if(Array.isArray(t))return t}function it(t,a){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,r,d,o,l=[],c=!0,h=!1;try{if(d=(s=s.call(t)).next,a!==0)for(;!(c=(n=d.call(s)).done)&&(l.push(n.value),l.length!==a);c=!0);}catch(y){h=!0,r=y}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(h)throw r}}return l}}function re(t,a){(a==null||a>t.length)&&(a=t.length);for(var s=0,n=new Array(a);s<a;s++)n[s]=t[s];return n}function ot(t,a){if(t){if(typeof t=="string")return re(t,a);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return re(t,a)}}function ct(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ne(t,a){return lt(t)||it(t,a)||ot(t,a)||ct()}var dt={root:function(a){a.props;var s=a.context;return J("p-overlaypanel p-component",{"p-input-filled":s&&s.inputStyle==="filled"||B.inputStyle==="filled","p-ripple-disabled":s&&s.ripple===!1||B.ripple===!1})},closeIcon:"p-overlaypanel-close-icon",closeButton:"p-overlaypanel-close p-link",content:"p-overlaypanel-content",transition:"p-overlaypanel"},ut=`
@layer primereact {
    .p-overlaypanel {
        position: absolute;
        margin-top: 10px;
        /* Github #3122: Prevent animation flickering  */
        top: -9999px;
        left: -9999px;
    }
    
    .p-overlaypanel-flipped {
        margin-top: -10px;
        margin-bottom: 10px;
    }
    
    .p-overlaypanel-close {
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        position: relative;
    }
    
    /* Animation */
    .p-overlaypanel-enter {
        opacity: 0;
        transform: scaleY(0.8);
    }
    
    .p-overlaypanel-enter-active {
        opacity: 1;
        transform: scaleY(1);
        transition: transform .12s cubic-bezier(0, 0, 0.2, 1), opacity .12s cubic-bezier(0, 0, 0.2, 1);
    }
    
    .p-overlaypanel-enter-done {
        transform: none;
    }
    
    .p-overlaypanel-exit {
        opacity: 1;
    }
    
    .p-overlaypanel-exit-active {
        opacity: 0;
        transition: opacity .1s linear;
    }
    
    .p-overlaypanel:after, .p-overlaypanel:before {
        bottom: 100%;
        left: calc(var(--overlayArrowLeft, 0) + 1.25rem);
        content: " ";
        height: 0;
        width: 0;
        position: absolute;
        pointer-events: none;
    }
    
    .p-overlaypanel:after {
        border-width: 8px;
        margin-left: -8px;
    }
    
    .p-overlaypanel:before {
        border-width: 10px;
        margin-left: -10px;
    }
    
    .p-overlaypanel-flipped:after, .p-overlaypanel-flipped:before {
        bottom: auto;
        top: 100%;
    }
    
    .p-overlaypanel.p-overlaypanel-flipped:after {
        border-bottom-color: transparent;
    }
    
    .p-overlaypanel.p-overlaypanel-flipped:before {
        border-bottom-color: transparent
    }
}
`,D=ce.extend({defaultProps:{__TYPE:"OverlayPanel",id:null,dismissable:!0,showCloseIcon:!1,closeIcon:null,style:null,className:null,appendTo:null,breakpoints:null,ariaCloseLabel:null,transitionOptions:null,onShow:null,onHide:null,children:void 0,closeOnEscape:!0},css:{classes:dt,styles:ut}});function le(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),s.push.apply(s,n)}return s}function mt(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?le(Object(s),!0).forEach(function(n){nt(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):le(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var ee=i.forwardRef(function(t,a){var s=de(),n=i.useContext(ue),r=D.getProps(t,n),d=i.useState(!1),o=ne(d,2),l=o[0],c=o[1],h=D.setMetaData({props:r,state:{visible:l}}),y=h.ptm,p=h.cx;h.sx;var v=h.isUnstyled;me(D.css.styles,v,{name:"overlaypanel"});var C=i.useRef(""),u=i.useRef(null),j=i.useRef(null),x=i.useRef(!1),b=i.useRef(null),N=i.useRef(null),w=Ie({target:j,overlay:u,listener:function(m,f){var E=f.type,L=f.valid;if(L)switch(E){case"outside":r.dismissable&&!x.current&&_();break;case"resize":case"scroll":case"orientationchange":z();break}x.current=!1},when:l}),P=ne(w,2),R=P[0],O=P[1],te=l&&r.closeOnEscape,ae=Te("overlay-panel",te);_e({callback:function(){_()},when:te&&ae,priority:[Me.OVERLAY_PANEL,ae]});var ye=function(m){return u&&u.current&&!(u.current.isSameNode(m)||u.current.contains(m))},ve=function(m,f){return j.current!=null&&j.current!==(f||m.currentTarget||m.target)},je=function(m){_(),m.preventDefault()},be=function(m){x.current=!0,V.emit("overlay-click",{originalEvent:m,target:j.current})},se=function(){x.current=!0},Ne=function(m,f){l?(_(),ve(m,f)&&(j.current=f||m.currentTarget||m.target,setTimeout(function(){G(m,j.current)},200))):G(m,f)},G=function(m,f){j.current=f||m.currentTarget||m.target,l?z():(c(!0),N.current=function(E){!ye(E.target)&&(x.current=!0)},V.on("overlay-click",N.current))},_=function(){c(!1),V.off("overlay-click",N.current),N.current=null},we=function(){u.current.setAttribute(C.current,""),W.set("overlay",u.current,n&&n.autoZIndex||B.autoZIndex,n&&n.zIndex.overlay||B.zIndex.overlay),k.addStyles(u.current,{position:"absolute",top:"0",left:"0"}),z()},Ce=function(){R(),r.onShow&&r.onShow()},Ee=function(){O()},Oe=function(){W.clear(u.current),r.onHide&&r.onHide()},z=function(){if(j.current&&u.current){k.absolutePosition(u.current,j.current);var m=k.getOffset(u.current),f=k.getOffset(j.current),E=0;m.left<f.left&&(E=f.left-m.left),u.current.style.setProperty("--overlayArrowLeft","".concat(E,"px")),m.top<f.top?(u.current.setAttribute("data-p-overlaypanel-flipped","true"),v&&k.addClass(u.current,"p-overlaypanel-flipped")):(u.current.setAttribute("data-p-overlaypanel-flipped","false"),v&&k.removeClass(u.current,"p-overlaypanel-flipped"))}},Se=function(){if(!b.current){b.current=k.createInlineStyle(n&&n.nonce||B.nonce,n&&n.styleContainer);var m="";for(var f in r.breakpoints)m=m+`
                    @media screen and (max-width: `.concat(f,`) {
                        .p-overlaypanel[`).concat(C.current,`] {
                            width: `).concat(r.breakpoints[f],`;
                        }
                    }
                `);b.current.innerHTML=m}};Le(function(){C.current=De(),r.breakpoints&&Se()}),pe(function(){b.current=k.removeInlineStyle(b.current),N.current&&(V.off("overlay-click",N.current),N.current=null),W.clear(u.current)}),i.useImperativeHandle(a,function(){return{props:r,toggle:Ne,show:G,hide:_,align:z,isVisible:function(){return l},getElement:function(){return u.current}}});var Pe=function(){var m=s({className:p("closeIcon"),"aria-hidden":!0},y("closeIcon")),f=r.closeIcon||i.createElement(Ve,m),E=Fe.getJSXIcon(f,mt({},m),{props:r}),L=r.ariaCloseLabel||He("close"),Y=s({type:"button",className:p("closeButton"),onClick:function(Ae){return je(Ae)},"aria-label":L},y("closeButton"));return r.showCloseIcon?i.createElement("button",Y,E,i.createElement(Qe,null)):null},Re=function(){var m=Pe(),f=s({id:r.id,className:J(r.className,p("root",{context:n})),style:r.style,onClick:function(K){return be(K)}},D.getOtherProps(r),y("root")),E=s({className:p("content"),onClick:function(K){return se()},onMouseDown:se},D.getOtherProps(r),y("content")),L=s({classNames:p("transition"),in:l,timeout:{enter:120,exit:100},options:r.transitionOptions,unmountOnExit:!0,onEnter:we,onEntered:Ce,onExit:Ee,onExited:Oe},y("transition"));return i.createElement(ze,Q({nodeRef:u},L),i.createElement("div",Q({ref:u},f),i.createElement("div",E,r.children),m))},ke=Re();return i.createElement(Be,{element:ke,appendTo:r.appendTo})});ee.displayName="OverlayPanel";var F=ce.extend({defaultProps:{__TYPE:"Chart",id:null,type:null,data:null,options:null,plugins:null,width:null,height:null,style:null,className:null,children:void 0},css:{classes:{root:"p-chart"},inlineStyles:{root:function(a){var s=a.props;return Object.assign({width:s.width,height:s.height},s.style)}},styles:`
        @layer primereact {
            .p-chart {
                position: relative
            }
        }
        `}}),ie=function(){try{return Chart}catch{return null}}(),fe=i.memo(i.forwardRef(function(t,a){var s=de(),n=i.useContext(ue),r=F.getProps(t,n),d=F.setMetaData({props:r}),o=d.ptm,l=d.cx,c=d.sx,h=d.isUnstyled;me(F.css.styles,h,{name:"chart"});var y=i.useRef(null),p=i.useRef(null),v=i.useRef(null),C=function(){u();var P={type:r.type,data:r.data,options:r.options,plugins:r.plugins};ie?p.current=new ie(v.current,P):Ue(()=>import("./auto-D-lioEmw.js"),[]).then(function(R){u(),v.current&&R&&(R.default?p.current=new R.default(v.current,P):p.current=new R(v.current,P))})},u=function(){p.current&&(p.current.destroy(),p.current=null)};i.useImperativeHandle(a,function(){return{props:r,getCanvas:function(){return v.current},getChart:function(){return p.current},getBase64Image:function(){return p.current.toBase64Image()},getElement:function(){return y.current},generateLegend:function(){return p.current&&p.current.generateLegend()},refresh:function(){return p.current&&p.current.update()}}}),i.useEffect(function(){C()}),pe(function(){u()});var j=r.options&&r.options.plugins&&r.options.plugins.title&&r.options.plugins.title.text,x=r.ariaLabel||j,b=s({id:r.id,ref:y,style:c("root"),className:J(r.className,l("root"))},F.getOtherProps(r),o("root")),N=s({ref:v,width:r.width,height:r.height,role:"img","aria-label":x},o("canvas"));return i.createElement("div",b,i.createElement("canvas",N))}),function(t,a){return t.data===a.data&&t.options===a.options&&t.type===a.type});fe.displayName="Chart";const pt=()=>{var u,j;const t=i.useRef(null),[a,s]=i.useState(new Date().getFullYear()),{currentData:n,isLoading:r,isError:d,refetch:o,isFetching:l}=$e({year:a}),c=(u=n==null?void 0:n.data)==null?void 0:u.pricesPerMonth,h=(j=n==null?void 0:n.data)==null?void 0:j.years,[y,p]=i.useState({}),[v,C]=i.useState({});return i.useEffect(()=>{if(!n)return;const x=getComputedStyle(document.documentElement),b=x.getPropertyValue("--text-color"),N=x.getPropertyValue("--text-color"),w=x.getPropertyValue("--surface-border"),P={labels:c==null?void 0:c.map(O=>O.month),datasets:[{type:"bar",label:"Ingresos",backgroundColor:x.getPropertyValue("--tertiary-color"),data:c==null?void 0:c.map(O=>O.income),borderColor:"white",borderWidth:2},{type:"bar",label:"Margen",backgroundColor:x.getPropertyValue("--primary-color"),data:c==null?void 0:c.map(O=>O.margin),options:{indexAxis:"y"}},{type:"bar",label:"Viajes",backgroundColor:x.getPropertyValue("black"),data:c==null?void 0:c.map(O=>O.trips),options:{indexAxis:"y"}}]},R={maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{position:"bottom",labels:{color:b}}},scales:{x:{ticks:{color:N},grid:{color:w}},y:{ticks:{color:N},grid:{color:w}}}};p(P),C(R)},[n]),e.jsxs(U,{loadingComponent:e.jsx(xt,{}),isLoader:l||r,fallBackComponent:e.jsx("div",{className:"flex items-center justify-center h-72",children:e.jsx($,{refetch:o,isFetching:l,isLoading:r,message:"No se pudieron cargar las estadisticas"})}),error:d,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm md:text-lg font-semibold text-tertiary max-w-28",children:"Resumen de estadistica"}),e.jsxs("div",{className:"flex items-center gap-x-1 cursor-pointer",onClick:x=>{var b;return(b=t==null?void 0:t.current)==null?void 0:b.toggle(x)},children:[e.jsx("span",{className:"text-slate-500",children:a}),e.jsx("i",{className:"pi pi-chevron-down text-slate-500"})]}),e.jsx(ee,{className:"!z-10",ref:t,children:h==null?void 0:h.map(x=>e.jsx("div",{onClick:()=>s(x),className:S("cursor-pointer p-2 hover:bg-gray-100 rounded-sm",x===a&&"bg-gray-100"),children:x},x))})]}),e.jsx("div",{className:"flex items-center mt-4 w-full",children:e.jsx(fe,{className:"w-full max-w-screen-lg mx-auto h-48 md:h-72 lg:h-96 max-h-96",data:y,options:v})})]})};function xt(){const{width:t,DESKTOP:a}=Ge();return e.jsx("div",{className:"w-full max-w-6xl  mx-auto p-6 shadow-sm",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(A,{width:"16rem",height:"2rem",className:"mb-4"}),e.jsx("div",{className:"block md:hidden",children:e.jsx(A,{width:"100%",height:"8rem",className:"mb-4"})}),e.jsxs("div",{className:"md:h-72 lg:h-[340px] w-full relative pt-4 hidden md:block",children:[e.jsx("div",{className:"absolute left-0 top-4 bottom-10 flex flex-col justify-between",children:[12e3,1e4,8e3,6e3,4e3,2e3,0].map((s,n)=>e.jsx("div",{className:"flex items-center h-6",children:e.jsx("span",{className:"text-gray-300 text-sm w-12 text-right",children:s})},`y-${n}`))}),e.jsx("div",{className:"absolute left-16 right-0 top-4 bottom-10 flex flex-col justify-between pointer-events-none",children:[...Array(7)].map((s,n)=>e.jsx("div",{className:"border-t border-gray-100 w-full"},`grid-${n}`))}),e.jsx("div",{className:"absolute left-16 right-0 top-4 bottom-10",children:e.jsx("div",{className:"h-full flex items-end justify-between px-4",children:[...Array(12)].map((s,n)=>e.jsx("div",{className:"flex flex-col items-center justify-end h-full",children:e.jsx(A,{width:t>a?"2rem":"1.5rem",height:`${ft()}%`,className:"rounded-t"})},`bar-${n}`))})})]})]})})}const ft=()=>Math.floor(Math.random()*100),oe={CURRENT_MONTH:{label:"Mes actual",value:"totalCurrentMonth"},LAST_MONTH:{label:"Mes anterior",value:"totalPreviousMonth"},TOTAL:{label:"Total",value:"total"}},H=({title:t,icon:a,extraInfo:s,type:n="quantity"})=>{const r=i.useRef(null),[d,o]=i.useState(oe.CURRENT_MONTH);return s?e.jsxs(T,{className:S("w-full shadow-md rounded-md  col-span-4 md:col-span-2 lg:col-span-1  max-w-screen-lg"),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"text-sm md:text-lg font-semibold text-tertiary sm:max-w-48 lg:max-w-fit",children:t}),e.jsx("i",{className:S(a,"text-xl text-primary")})]}),e.jsxs("span",{className:"text-4xl md:text-2xl xl:text-3xl 2xl:text-4xl font-extrabold text-tertiary block",children:[n==="currency"&&q(s[d.value]),n==="quantity"&&s[d.value],n==="percentage"&&s[d.value]+"%"]}),e.jsxs("div",{className:"flex items-center gap-x-2 justify-between",children:[e.jsx("span",{className:"text-sm text-slate-500",children:d.value==="totalCurrentMonth"?`${s.increase>0?"+":""}${s.increase}% desde el mes anterior`:""}),e.jsxs("div",{className:"flex items-center gap-x-1 cursor-pointer",onClick:l=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.toggle(l)},children:[e.jsx("span",{className:"text-slate-500 text-sm",children:d.label}),e.jsx("i",{className:"pi pi-chevron-down text-slate-500"})]}),e.jsx(ee,{className:"!z-10",ref:r,children:Object.values(oe).map(l=>e.jsx("div",{onClick:()=>o(l),className:S("cursor-pointer p-2 hover:bg-gray-100 rounded-sm",d.value===l.value&&"bg-gray-100"),children:l.label},l.value))})]})]}):null},he=()=>e.jsx(T,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(A,{shape:"circle",size:"3rem"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(A,{width:"60%",height:"1rem"}),e.jsx(A,{width:"40%",height:"0.75rem"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx(A,{width:"4rem",height:"1rem"}),e.jsx(A,{width:"5rem",height:"1.2rem",className:"mt-2"})]})]})}),ge=({createdAt:t,updatedAt:a,userFullname:s,handleViewDetails:n})=>e.jsxs("div",{className:"bg-gray-50 p-3 mt-4 border-gray-100 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-y-3 md:grid-cols-3",children:[e.jsxs("div",{className:"text-xs flex max-sm:justify-center items-center",children:[e.jsx("i",{className:"pi pi-calendar h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 ",children:"Fecha de creación"}),e.jsx("p",{className:"text-gray-700",children:I.format(t,"dd/MM/yyyy HH:mm")})]})]}),e.jsxs("div",{className:"text-xs flex items-center justify-center",children:[e.jsx("i",{className:"pi pi-clock h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Última actualización"}),e.jsx("p",{className:"text-gray-700",children:I.format(a,"dd/MM/yyyy HH:mm")})]})]}),e.jsxs("div",{className:"text-xs flex items-center max-sm:justify-center justify-end",children:[e.jsx("i",{className:"pi pi-user h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Creado por"}),e.jsx("p",{className:"text-gray-700",children:s||"Usuario desconocido"})]})]})]}),e.jsx("div",{className:"w-full flex md:justify-end",children:e.jsx(X,{size:"small",label:"Ver detalles",className:"mt-4 w-full md:max-w-48 text-sm",onClick:()=>n()})})]}),{VIEW_QUOTE:ht}=We.private,gt=({quotation:t})=>{var d,o,l,c,h,y,p;const a=Ye(),[s,n]=i.useState(!1),r=v=>{a(ht(v))};return e.jsxs(T,{title:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"inline-flex items-center space-x-2",children:[e.jsx("i",{className:"pi pi-file text-gray-400"}),e.jsxs("p",{className:"text-sm sm:text-base font-medium text-gray-500",children:["Cotización: ",t.name]})]}),e.jsx(Ke,{value:t.completionPercentage,className:"w-full sm:w-24 h-3 text-[10px]"})]}),className:"hover:bg-gray-100 transition duration-200 group",pt:{body:{className:"py-2 sm:py-0"}},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(xe,{size:"large",shape:"circle",className:"max-sm:text-lg",label:((o=(d=t.tripDetails)==null?void 0:d.client)==null?void 0:o.fullName)||"?"}),e.jsx("div",{className:"ml-3",children:t.tripDetails?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm sm:text-base font-medium text-gray-900",children:(c=(l=t.tripDetails)==null?void 0:l.client)==null?void 0:c.fullName}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs sm:text-sm text-gray-500",children:[e.jsx("i",{className:"pi pi-calendar"}),e.jsxs("p",{children:[I.format((h=t.tripDetails)==null?void 0:h.startDate)," -"," ",I.format((y=t.tripDetails)==null?void 0:y.endDate)]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm sm:text-base font-medium text-gray-400",children:"Cliente no asignado"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-300",children:"--/--/---- - --/--/----"})]})})]}),e.jsxs("div",{className:"flex flex-col items-end sm:ml-auto sm:me-2 space-y-2",children:[e.jsx("p",{className:"text-lg sm:text-xl font-semibold text-primary",children:q(t.finalPrice||0)}),e.jsx(at,{...yt(t.status)})]}),e.jsx(X,{text:!0,icon:s?"pi pi-chevron-up":"pi pi-chevron-down",className:"text-gray-400 h-8 w-8 p-0 self-center sm:self-auto",onClick:()=>n(!s)})]}),s&&e.jsx(ge,{createdAt:t.createdAt,updatedAt:t.updatedAt,userFullname:((p=t.user)==null?void 0:p.fullname)||"Usuario desconocido",handleViewDetails:()=>r(t.id)})]})},yt=t=>({value:Z[t].label,severity:Z[t].severity,icon:Z[t].icon}),vt=()=>{const[t,a]=i.useState(!1),[s,n]=i.useState(!1);return i.useEffect(()=>{if(t){const r=setTimeout(()=>{n(!0)},500);return()=>{clearTimeout(r),n(!1)}}},[t]),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-8 text-center transition-all duration-300 relative",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:S("bg-gray-50 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6 transition-all duration-500",t&&"bg-teal-50"),children:e.jsx("i",{className:S("pi text-4xl transition-all pi-file duration-500",t?"text-primary":"text-gray-300")})}),t&&e.jsx("div",{className:"absolute top-2 right-1/2 translate-x-16",children:e.jsx("div",{className:"animate-pulse",children:e.jsx("i",{className:"pi pi-chart-line text-teal-500 text-xl"})})})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No hay cotizaciones recientes"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Las cotizaciones que crees aparecerán aquí para que puedas revisarlas y convertirlas en reservas."}),s&&e.jsx("div",{className:"absolute top-6 right-6 bg-teal-50 text-teal-700 p-3 rounded-lg shadow-sm border border-teal-100 text-sm max-w-xs animate-fade-in",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"bg-teal-100 rounded-full p-1.5 mt-0.5",children:e.jsx("i",{className:"pi pi-chart-line text-teal-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Consejo:"}),e.jsx("p",{children:"Crear cotizaciones te ayuda a gestionar mejor tus ventas potenciales."})]})]})})]})})},jt=()=>{const{currentData:t,isLoading:a,isFetching:s,refetch:n,isError:r}=Ze({page:1,limit:5}),d=t==null?void 0:t.data.content;return e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-sm md:text-lg font-bold text-tertiary mb-4",children:"Cotizaciones Recientes"}),e.jsx(U,{isLoader:a||s,loadingComponent:e.jsx("div",{className:"space-y-4",children:[...Array(6)].map((o,l)=>e.jsx(he,{},l))}),fallBackComponent:e.jsx($,{refetch:n,isFetching:s,isLoading:a,message:"No se pudieron cargar las cotizaciones recientes"}),error:r,children:e.jsx("ul",{className:"space-y-3",children:d&&d.length?d.map((o,l)=>e.jsx(gt,{quotation:o},l)):e.jsx(vt,{})})})]})},bt=()=>{const[t,a]=i.useState(!1);return e.jsx(T,{className:"text-center transition-all duration-300",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:S("bg-gray-50 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6 transition-all duration-500",t&&"bg-teal-50"),children:e.jsx("i",{className:S("pi text-4xl transition-all pi-calendar duration-500",t?"text-primary":"text-gray-300")})}),t&&e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full",children:e.jsx("div",{className:"animate-bounce flex justify-center mt-[-20px]",children:e.jsx("i",{className:"pi pi-plus-circle text-teal-500 text-xl"})})})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No tienes reservas activas"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Cuando crees una reserva, aparecerá aquí para que puedas gestionarla fácilmente."})]})})},Nt=({reservation:t})=>{var o,l,c,h,y,p,v,C;const[a,s]=i.useState(!1),n=((c=(l=(o=t.versionQuotation)==null?void 0:o.tripDetails)==null?void 0:l.client)==null?void 0:c.fullName)||"",r=(h=t.versionQuotation)==null?void 0:h.tripDetails,d=u=>{alert(`Viewing details for quote ID: ${u}`)};return e.jsxs(T,{title:e.jsxs("div",{className:"flex items-center gap-x-1 text-gray-500 mb-3",children:[e.jsx("i",{className:"pi pi-file text-gray-400"}),e.jsxs("span",{className:"text-sm",children:["Reserva: ",t.id]})]}),className:"hover:bg-gray-100 transition duration-200 group",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center w-full sm:w-auto",children:[e.jsx(xe,{size:"large",shape:"circle",className:"max-sm:text-lg",label:n}),e.jsxs("div",{className:"ml-3 text-sm",children:[e.jsx("h3",{className:"text-gray-500 font-medium",children:n}),e.jsxs("div",{className:"flex gap-x-1 items-center text-gray-400",children:[e.jsx("i",{className:"pi pi-calendar text-gray-500"}),e.jsxs("span",{children:[I.format(r.startDate)," -"," ",I.format(r.endDate)]})]})]})]}),e.jsxs("div",{className:"flex items-center w-full sm:w-auto justify-between sm:justify-end",children:[e.jsx("div",{className:"text-right mr-4",children:e.jsx("div",{className:"text-primary text-lg font-semibold",children:q(((y=t.versionQuotation)==null?void 0:y.finalPrice)||0)})}),e.jsx(X,{text:!0,icon:a?"pi pi-chevron-up":"pi pi-chevron-down",className:"text-gray-400 h-8 w-8 p-0",onClick:()=>s(!a)})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-x-1 text-gray-500",children:[e.jsx("i",{className:"pi pi-map-marker text-gray-400"}),e.jsx("span",{children:(p=r==null?void 0:r.cities)==null?void 0:p.map(u=>u.name).join(" - ")})]}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx("i",{className:S("text-gray-400 me-1.5 text-sm pi ",(r==null?void 0:r.numberOfPeople)===1?"pi-user":"pi-users")}),e.jsx("span",{children:(r==null?void 0:r.numberOfPeople)===1?"1 persona":`${r==null?void 0:r.numberOfPeople} personas`})]})]}),a&&e.jsx(ge,{createdAt:t.createdAt,updatedAt:t.updatedAt,userFullname:((C=(v=t.versionQuotation)==null?void 0:v.user)==null?void 0:C.fullname)||"Usuario desconocido",handleViewDetails:()=>d(t.id)})]},t.id)},wt=()=>{var o;const{currentData:t,isError:a,isLoading:s,refetch:n,isFetching:r}=Je({limit:6,page:1,status:[Xe.ACTIVE]}),d=(o=t==null?void 0:t.data)==null?void 0:o.content;return e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-sm md:text-lg font-bold text-tertiary mb-4",children:"Reservas activas"}),e.jsx(U,{error:a,isLoader:s||r,loadingComponent:Array.from({length:6}).map((l,c)=>e.jsx(he,{},c)),fallBackComponent:e.jsx($,{isFetching:r,isLoading:s,message:"No se pudieron cargar las reservas activas",refetch:n}),children:e.jsx("ul",{className:"space-y-3",children:d&&d.length?d.map(l=>e.jsx(Nt,{reservation:l},l.id)):e.jsx(bt,{})})})]})},Ct=["No se pudieron cargar la cantidad de cotizaciones pendientes","No se pudieron cargar las reservas activas","No se pudieron cargar los ingresos totales","No se pudó cargar el margen de utilidad"],kt=()=>{const{authUser:t}=qe(l=>l.auth),{currentData:a,isLoading:s,isFetching:n,refetch:r,isError:d}=et(),o=a==null?void 0:a.data;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between max-sm:gap-x-3 items-center",children:[e.jsxs("h1",{className:"text-xl sm:text-3xl text-start font-bold text-primary",children:[Et(),", ",t==null?void 0:t.fullname," 👋"]}),e.jsx(tt,{})]}),e.jsxs("div",{className:"grid grid-cols-4 grid-flow-row gap-x-4 gap-y-6 mt-4",children:[e.jsx("div",{className:"w-full bg-white border col-span-4 h-full shadow-md rounded-md p-3",children:e.jsx(pt,{})}),e.jsxs(U,{isLoader:n||s,fallBackComponent:e.jsx(e.Fragment,{children:Ct.map((l,c)=>e.jsx(T,{className:"shadow-md flex items-center justify-center col-span-4 md:col-span-2 lg:col-span-1",children:e.jsx($,{refetch:r,isFetching:n,isLoading:s,message:l})},c))}),skeletonQuantity:4,skeleton:{className:"col-span-4 md:col-span-2 lg:col-span-1",height:"10rem"},error:d,children:[e.jsx(H,{title:"Cotizaciones Pendientes",icon:"pi pi-file",extraInfo:o==null?void 0:o.totalPendingQuotations}),e.jsx(H,{title:"Reservas Activas",icon:"pi pi-calendar",extraInfo:o==null?void 0:o.totalActive}),e.jsx(H,{title:"Ingresos Totales",icon:"pi pi-dollar",extraInfo:o==null?void 0:o.totalIncome,type:"currency"}),e.jsx(H,{title:"Margen de Utilidad",icon:"pi pi-percentage",extraInfo:o==null?void 0:o.totalMargin,type:"percentage"})]}),e.jsx("div",{className:"w-full p-6 bg-white border col-span-4 self-start lg:col-span-2 shadow-md rounded-md",children:e.jsx(jt,{})}),e.jsx("div",{className:"w-full p-6 bg-white border col-span-4 self-start lg:col-span-2 shadow-md rounded-md   ",children:e.jsx(wt,{})})]})]})},Et=()=>{const t=I.getHours();return t>=0&&t<12?"Buenos días":t>=12&&t<18?"Buenas tardes":"Buenas noches"};export{kt as default};
