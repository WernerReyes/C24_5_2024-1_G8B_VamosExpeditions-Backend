import{$ as h,bw as b,bx as P,j as e,at as w,I as u,B as o,by as j,bz as S,P as g,r as N,bA as k,K as p,Q as D}from"./index-Dt1SHOUe.js";import{p as E}from"./phoneNumber.adapter-C09bg4A8.js";import{D as M}from"./divider.esm-Bzk6IvRB.js";import{T as v}from"./tag.esm-DZ__72Uj.js";import{u as y,t as C,C as c}from"./zod-IK-GZyER.js";const V=({setShowModal:i,showModal:n})=>{const{authUser:m}=h(a=>a.auth),{control:t,handleSubmit:s,formState:{isDirty:r}}=y({resolver:C(b.getSchema),defaultValues:b.getDefault(m)}),[x,{isLoading:d}]=P(),f=async a=>{x(a).unwrap().then(()=>i(!1))};return e.jsx(w,{header:"Editar Perfil",visible:n,style:{width:"50vw"},onHide:()=>i(!1),children:e.jsxs("form",{onSubmit:s(f),className:"flex flex-col gap-y-4",noValidate:!0,children:[e.jsx("div",{children:e.jsx(c,{control:t,name:"fullname",defaultValue:"",render:({field:a,fieldState:{error:l}})=>e.jsx(u,{label:{htmlFor:"Nombre completo ",text:"Nombre completo"},type:"text",small:{text:l==null?void 0:l.message},placeholder:"Nombre completo",className:"w-full",invalid:!!l,...a})})}),e.jsx("div",{children:e.jsx(c,{control:t,name:"email",defaultValue:"",render:({field:a,fieldState:{error:l}})=>e.jsx(u,{label:{htmlFor:"Correo electronico",text:"Correo electronico"},type:"email",small:{text:l==null?void 0:l.message,className:"text-red-500"},placeholder:"Correo electronico",className:"w-full",id:"email",invalid:!!l,...a})})}),e.jsx("div",{children:e.jsx(c,{control:t,name:"phoneNumber",defaultValue:"",render:({field:a,fieldState:{error:l}})=>e.jsx(u,{label:{htmlFor:"Número de teléfono",text:"Telefono ( +51999999999 )"},type:"text",small:{text:l==null?void 0:l.message},placeholder:"Número de teléfono",className:"w-full",invalid:!!l,...a})})}),e.jsx("div",{children:e.jsx(c,{control:t,name:"description",defaultValue:"",render:({field:a,fieldState:{error:l}})=>e.jsx(u,{label:{htmlFor:"Descripción",text:"Descripción"},type:"text",small:{text:l==null?void 0:l.message},placeholder:"Descripción",className:"w-full",invalid:!!l,...a})})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(o,{label:"Cancelar",outlined:!0,type:"button",onClick:()=>i(!1)}),e.jsx(o,{label:"Guardar",type:"submit",className:"bg-primary",disabled:!r,loading:d})]})]})})},F=({setShowModal:i,showModal:n})=>{const{authUser:m}=h(a=>a.auth),{control:t,handleSubmit:s,formState:{isDirty:r}}=y({resolver:C(j.getSchema),defaultValues:j.getDefault(m)}),[x,{isLoading:d}]=S(),f=async a=>{x(a).unwrap().then(()=>i(!1))};return e.jsx(w,{header:"Editar Perfil",visible:n,style:{width:"50vw"},onHide:()=>i(!1),children:e.jsxs("form",{onSubmit:s(f),className:"flex flex-col gap-y-4 mt-5",noValidate:!0,children:[e.jsx("div",{children:e.jsx(c,{control:t,name:"oldPassword",defaultValue:"",render:({field:a,fieldState:{error:l}})=>e.jsx(g,{label:{htmlFor:"Contraseña actual",text:"Contraseña actual"},type:"text",small:{text:l==null?void 0:l.message,className:"text-red-500"},placeholder:"Contraseña actual",toggleMask:!0,feedback:!1,invalid:!!l,...a})})}),e.jsx("div",{children:e.jsx(c,{control:t,name:"newPassword",defaultValue:"",render:({field:a,fieldState:{error:l}})=>e.jsx(g,{label:{htmlFor:"Nueva contraseña",text:"Nueva contraseña"},type:"email",small:{text:l==null?void 0:l.message,className:"text-red-500"},placeholder:"Nueva contraseña",toggleMask:!0,feedback:!1,invalid:!!l,...a})})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(o,{label:"Cancelar",outlined:!0,type:"button",onClick:()=>i(!1)}),e.jsx(o,{label:"Cambiar contraseña",type:"submit",className:"bg-primary",disabled:!r,loading:d})]})]})})},B=()=>{var d;const[i,n]=N.useState(!1),[m,t]=N.useState(!1),{authUser:s}=h(f=>f.auth),{label:r,severity:x}=k[s.role.name];return e.jsxs(e.Fragment,{children:[e.jsx(V,{showModal:i,setShowModal:n}),e.jsx(F,{showModal:m,setShowModal:t}),e.jsx("div",{className:"flex justify-center h-full items-center",children:e.jsx(p,{className:"w-full shadow-lg p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"w-full md:w-1/3 flex flex-col justify-center items-center  text-center",children:[e.jsx(D,{badge:{className:"w-6 h-6 mt-2 me-4",severity:s!=null&&s.online?"success":"danger"},shape:"circle",label:s==null?void 0:s.fullname,pt:{label:{className:"text-6xl font-bold"}},className:"mb-3 w-40 h-40 p-overlay-badge"}),e.jsx("h4",{className:"text-xl font-semibold",children:s==null?void 0:s.fullname}),e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[e.jsx(o,{label:"Editar Perfil",icon:"pi pi-pencil",outlined:!0,onClick:()=>n(!0)}),e.jsx(o,{label:"Cambiar Contraseña",icon:"pi pi-lock",onClick:()=>t(!0)})]})]}),e.jsx(M,{layout:"vertical"}),e.jsxs("div",{className:"w-full md:w-2/3",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Información personal"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4 mt-4",children:[e.jsxs("p",{children:[e.jsx("label",{className:"block text-slate-400",children:"Nombres completos:"})," ",s==null?void 0:s.fullname]}),e.jsxs("p",{children:[e.jsx("label",{className:"block text-slate-400",children:"Email:"})," ",s==null?void 0:s.email]}),e.jsxs("p",{children:[e.jsx("label",{className:"block text-slate-400",children:"Phone:"}),(d=E.parse((s==null?void 0:s.phoneNumber)||""))==null?void 0:d.formatInternational()]})]}),e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 mt-6",children:"Estado de la cuenta"}),e.jsxs("div",{className:"grid grid-cols-2 w-full xl:w-1/2 mx-auto gap-4 mt-4",children:[e.jsxs(p,{className:"bg-slate-50",children:[e.jsxs("div",{className:"flex items-center gap-x-1",children:[e.jsx("i",{className:"pi pi-user me-2 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Cuenta"})]}),e.jsx(v,{value:"Activo",severity:"success"})]}),e.jsxs(p,{className:"bg-slate-50",children:[e.jsxs("div",{className:"flex items-center gap-x-1",children:[e.jsx("i",{className:"pi pi-shield me-2 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Role"})]}),e.jsx(v,{value:r,severity:x})]})]}),e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 mt-6",children:"Sobre mí"}),e.jsx("p",{className:"mt-4 text-gray-600",children:(s==null?void 0:s.description)||"Sin descripción"})]})]})})})]})};export{B as ProfilePage,B as default};
